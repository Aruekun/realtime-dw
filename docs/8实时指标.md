`写在前面`

不知不觉已经来到了2021年的夏天了，今年的夏天来的格外的早，风也很大，似乎学习的思路也应该转变一下。刚开始做这一行的时候，拿到一个需求的时候，可能会直接想到怎么代码实现，而没有真正去理解需求所涉及的架构是否合理、如何从产品的角度理解需求，甚至需求本身它就是不合理的。拿数据指标体系而言，作为一个研发人员，应该从数据产品、数仓架构、业务特点等角度来设计数据指标体系。本文主要参考<人人都是产品经理>、<指标体系在滴滴的实现>。

## 数据指标体系

### 什么是数据指标体系

- 通常我们讲述的指标是对当前业务有参考价值的统计数据，换句话说，不是所有的数据都叫指标；指标的核心意义是它使得业务目标可描述、可度量、可拆解；常用的指标有PV、UV等。

- 指标可分为原子指标和派生指标，按照笔者的理解，原子指标就是不加任何修饰词的指标，又叫度量，例如订单量、用户量、支付金额等；衍生/派生指标就是在原子指标上进行加减乘除或者修饰词的限定等等。

![【7000字】从 0-1 构建指标体系](8实时指标.assets/U0PhVDw2bYXZmBKdBrjR.png)

- 指标体系是从不同维度梳理业务，并将零散单点的具有相互联系的指标，系统化地组织起来；其中，维度分为定性维度和定量维度，定性维度主要是文字描述类，例如姓名、地名等；定量维度主要是数值描述类，如工资、年龄等。
- 指标体系是由不同的维度组成，而维度是指用户观察、思考与表述某事物的“思维角度”，维度是指标体系的核心，没有维度，单纯说指标是没有任何意义的。维度主要分为定性维度和定量维度，定性维度，主要是偏文字描述类如城市、性别、职业等;定量维度，主要是数值类描述如收入、年龄等，对定量维度需要做数值分组处理。
- 总的来说，指标体系是对业务指标体系化的汇总，主要用来明确指标的维度、口径、指标取数逻辑等信息，并能够迅速获得指标的相关信息。多个不同的指标和维度可以组合起来进行业务的综合分析，用户可通过指标的变化看到整体业务的变化，并能够快速发现问题、定位问题

### 指标体系生命周期

生命周期主要包含定义、生产、消费、下线四个阶段。针对整个生命周期要持续做指标运维、质量保障，同时为了提高指标数据复用度，降低用户使用成本需要做对应的数据运营工作。

<img src="8实时指标.assets/640-20210516224001799" alt="图片" style="zoom:50%;" />

### 为什么需要数据指标体系

- 对于数据产品经理来说，搭建指标体系可以更好地梳理业务，提高问题分析效率。
- 对于研发来说，大数据平台统一关键指标业务口径及计算口径，统一企业业务目标，实现自上而下目标驱动。

## 如何设计指标体系

指标体系建设的常用方法是通过场景化进行指标体系的搭建，以用户的视角场景化思考，自上而下业务驱动指标体系建设，所以要在特定场景下做好指标体系建设，需要先选好指标，然后用科学的方法搭建指标体系。

<img src="8实时指标.assets/ZoCJhNbfM6TwIqBvP7t4.png" alt="【7000字】从 0-1 构建指标体系" style="zoom:50%;" />

### 定目标

这是第一步，也是最重要的一步，同时也是很多产品上线运营后进行评估的标准，并以此形成闭环。

好的目标具有以下三个特征：

- 与高层目标一致；
- 目标应当符合 SMART 原则；
- 具有挑战性。

### 用分析模型搭建指标体系

在《精益数据分析》一书中给出了两套比较常用的指标体系建设方法论，其中一个就是比较有名的海盗指标法，也就是我们经常听到的AARRR海盗模型。海盗模型是用户分析的经典模型，它反映了增长是系统性地贯穿于用户生命周期各个阶段的：用户拉新(Acquisition)、用户激活(Activation)、用户留存(Retention)、商业变现(Revenue)、用户推荐(Referral)。

#### AARRR模型

- A拉新
  通过各种推广渠道，以各种方式获取目标用户，并对各种营销渠道的效果评估，不断优化投入策略，降低获客成本。涉及关键指标：曝光量、点击、下载、安装、激活、安装率、激活率、注册转化率、留存率、付费率等。
- A活跃
  活跃用户指真正开始使用了产品提供的价值，我们需要掌握用户的行为数据，监控产品健康程度。这个模块主要反映用户进入产品的行为表现，是产品体验的核心所在。涉及关键指标：新老用户占比、DAU/WAU/MAU、日均登录次数、日均使用时长等。
- R留存
  衡量用户粘性和质量的指标。涉及关键指标：新用户留存率、老用户留存率、活跃用户留存率、日周月留存率、流失率等。
- R变现
  主要用来衡量产品商业价值。涉及关键指标：ARPU、ARPPU、付费率（区分新老用户）、客单价、LTV、GMV 等。
- R推荐
  主要是基于产品、营销、明星等事件的吸引力，从而使用户自发地传播。涉及关键指标例如邀请率、裂变系数等

![【7000字】从 0-1 构建指标体系](8实时指标.assets/FFBekRjksJE8Q4rtGN28.png)

#### OSM模型

OSM模型（Obejective，Strategy，Measurement）是指标体系建设过程中辅助确定核心的重要方法，包含业务目标、业务策略、业务度量，是指标内容横向的思考。

- O 用户使用产品的目标是什么？产品满足了用户的什么需求？主要从用户视角和业务视角确定目标，原则是切实可行、易理解、可干预、正向有益
- S 为了达成上述目标我采取的策略是什么？
- M 这些策略随之带来的数据指标变化有哪些？

可以根据实际业务场景，结合使用OSM和AARRR模型，来系统性的选择不同阶段所需要的核心数据指标。

<img src="8实时指标.assets/640-20210516225935573.png" alt="图片" style="zoom:50%;" />

#### 指标分级

指标分级主要是将指标化解为不同层级并逐级分析。根据企业战略、企业组织及业务进行自上而下的分级，对指标进行层层剖析，其中可结合 OSM 模型来确定指标。

##### 一级指标：公司战略层 

用于衡量公司整体目标完成情况，与公司当前业务紧密结合，并对所有员工均有核心的指导意义。一级指标通常指引着公司的战略。

一级指标通常根据市场、产品生命周期、产品品类和商业模式确定，一个时间点只有一个最关键的指标（OMTM，One Metric That Matters）。

例如：小红书的OMTM（又称：北极星指标）如何演变？

<img src="8实时指标.assets/pbfzmZFLAeBF4O6cFtF2.png" alt="【7000字】从 0-1 构建指标体系" style="zoom:50%;" />

##### 二级指标：业务策略层

为达成战略目标，公司会对其进一步拆解为业务线或事业群的核心指标；通常为了实现一级指标，企业会做出相应的策略，二级指标也会与这些策略有所关联。

例如：小红书当前的一级指标是销售额，那么二级指标可以设定为不同品类商品的销售额，分地区的销售额等；这样当一级指标出现问题的时候，我们可以快速定位问题所在。

##### 三级指标：业务执行层

三级指标是将二级指标纵向展开，进行路径拆解、漏斗拆解、公式拆解；三级指标通常用于定位二级指标的问题，通常指导一线运营或分析人员开展工作，三级指标是业务中最多的指标。

路径拆解需要对业务流程进行分析，例如：打开应用、浏览首页、浏览商品详情页、加入购物车、提交订单、订单支付、支付成功。

运用公式拆解月活跃用户，如下图。

<img src="8实时指标.assets/Qktv9k4uWadLTLiXqNOz.png" alt="【7000字】从 0-1 构建指标体系" style="zoom:50%;" />

### 场景化搭建指标体系

目前阶段互联网业务比较流行的一种通用抽象场景“人、货、场”，实际就是我们日常所说的用户、产品、场景，在通俗点讲就是谁在什么场景下使用了什么产品，不同的商业模式会有不同的组合模式。

以滴滴实际场景为例：哪些场景（此处场景定义为终端，如Native，微信，支付宝）的什么人（乘客）在平台上使用了哪些货（平台业务线，如快车/专车等），进而为评估用户增长的价值和效果。

#### 人的视角

从"人"的视角，我们比较关心的是什么乘客在什么时间打的车，排了多长时间，等了多长时间上车，周期内第几次打车，打车花了多少钱，是否有投诉和取消行为，具体到数据指标主要看发单用户数、完单用户数、客单价、周期内完单订单数、取消订单数、评价订单数等。

![图片](8实时指标.assets/640-20210516232619151.png)

#### 货的视角

从"货"的视角，我们比较关心的就是成交了多少，交易额多少，花了多少，到具体数据指标主要会看GMV、成交率、取消率指标，在进一步会细分到城市、区域，一级品类、二级品类。数据的效果通过目标对比，横向对比、历史比较等方式进行分析确定。

![图片](8实时指标.assets/640-20210516232619160.png)

#### 场的视角

从"场"的视角，我们比较关心的就是哪个渠道用户点击量大曝光率大，带来了多少新用户，完成多少交易订单，客单价是多少；或者是哪个活动拉新或促活效果怎么样转化率多少，结合场景数据实际情况制定对应策略。

![图片](8实时指标.assets/640-20210516232619115)

以上分别从"人"、"货"、"场"三个角度进行了数据指标和分析维度的提炼，下面我们把三类指标结合指标分级方法进行分解关联。

![图片](8实时指标.assets/640-20210516232730698.png)

## 如何管理指标体系

### 痛点分析

主要从业务、技术、产品三个视角来看：

- 业务视角

  业务分析场景指标、维度不明确；

  频繁的需求变更和反复迭代，数据报表臃肿，数据参差不齐；

  用户分析具体业务问题找数据、核对确认数据成本较高。

- 技术视角

  指标定义，指标命名混乱，指标不唯一，指标维护口径不一致；

  指标生产，重复建设；数据汇算成本较高；

  指标消费，数据出口不统一，重复输出，输出口径不一致；

- 产品视角

  缺乏系统产品化支持从生产到消费数据流没有系统产品层面打通；

### 管理目标

- 技术目标  

  统一指标和维度管理，指标命名、计算口径、统计来源唯一， 维度定义规范、维度值一致

- 业务目标  
  统一数据出口、场景化覆盖

- 产品目标  
  指标体系管理工具产品化落地；指标体系内容产品化落地支持决策、分析、运营例如决策北极星、智能运营分析产品等

### 模型架构

![图片](8实时指标.assets/640-20210516233805869.png)

#### 业务线

业务板块定义原则：业务逻辑层面进行抽象、物理组织架构层面进行细分，可根据实际业务情况进行层级分拆细化，层级分级建议进行最多进行三级分拆，一级细分可公司层面统一规范确定，二级及后续拆分可根据业务线实际业务进行拆分。例如滴滴出行领域业务逻辑层面两轮车和四轮车都属于出行领域可抽象出行业务板块(level一级)，根据物理组织架构层面在进行细分普惠、网约车、出租车、顺风车（level二级），后续根据实际业务需求可在细分,网约车可细分独乘、合乘，普惠可细分单车、企业级。

**规范定义：**

- 数据域
  指面向业务分析，将业务过程或者维度进行抽象的集合。其中，业务过程可以概括为一个个不拆分的行为事件，在业务过程之下，可以定义指标；维度，是度量的环境，如乘客呼单事件，呼单类型是维度。为了保障整个体系的生命力，数据域是需要抽象提炼，并且长期维护更新的，变动需执行变更流程。

- 业务过程

  指公司的业务活动事件，如，呼单、支付都是业务过程。其中，业务过程不可拆分。

- 时间周期
- 用来明确统计的时间范围或者时间点，如最近30天、自然周、截止当日等。

- 修饰类型

  是对修饰词的一种抽象划分。修饰类型从属于某个业务域，如日志域的访问终端类型涵盖APP端、PC端等修饰词。

- 修饰词

  指的是统计维度以外指标的业务场景限定抽象，修饰词属于一种修饰类型，如在日志域的访问终端类型下，有修饰词APP、PC端等。

- 度量/原子指标

  原子指标和度量含义相同，基于某一业务事件行为下的度量，是业务定义中不可再拆分的指标，具有明确业务含义的名称，如支付金额。

- 维度

  维度是度量的环境，用来反映业务的一类属性，这类属性的集合构成一个维度，也可以称为实体对象。维度属于一个数据域，如地理维度（其中包括国家、地区、省市等）、时间维度（其中包括年、季、月、周、日等级别内容）。

- 维度属性

  维度属性隶属于一个维度，如地理维度里面的国家名称、国家ID、省份名称等都属于维度属性。

- 指标分类

  主要分为原子指标、派生指标、衍生指标

**原子指标**  
基于某一业务事件行为下的度量，是业务定义中不可再拆分的指标，具有明确业务含义的名称，如呼单量、交易金额

**派生指标**
是1个原子指标+多个修饰词（可选）+时间周期，是原子指标业务统计范围的圈定。派生指标又分以下二种类型：

1. - 事务型指标：
     是指对业务过程进行衡量的指标。例如，呼单量、订单支付金额，这类指标需要维护原子指标以及修饰词，在此基础上创建派生指标。

2. - 存量型指标：

3. 是指对实体对象（如司机、乘客）某些状态的统计，例如注册司机总数、注册乘客总数，这类指标需要维护原子指标以及修饰词，在此基础上创建派生指标，对应的时间周期一般为“历史截止当前某个时间”。

4. **衍生指标**
   是在事务性指标和存量型指标的基础上复合成的。主要有比率型、比例型、统计型均值 

#### 模型设计

主要采用维度建模方法进行构建，基础业务明细事实表主要存储维度属性集合和度量/原子指标；分析业务汇总事实表按照指标类别(去重指标、非去重指标)分类存储，非去重指标汇总事实表存储统计维度集合、原子指标或派生指标，去重指标汇总事实表只存储分析实体统计标签集合。

指标体系在数仓物理实现层面主要是结合数仓模型分层架构进行指导建设，指标数据主要存储在DWS层，作为指标的核心管理层。

![image-20210516235107922](8实时指标.assets/image-20210516235107922.png)

### 指标体系元数据管理

**维度管理：**

包括基础信息和技术信息，由不同角色进行维护管理。

- 基础信息对应维度的业务信息，由业务管理人员、数据产品或BI分析师维护，主要包括维度名称、业务定义、业务分类。
- 技术信息对应维度的数据信息，由数据研发维护，主要包括是否有维表（是枚举维度还是有独立的物理维表）、是否是日期维、对应code英文名称和中文名称、对应name英文名称和中文名称。如果维度有维度物理表，则需要和对应的维度物理表绑定，设置code和name对应的字段。如果维度是枚举维，则需要填写对应的code和name。维度的统一管理，有利于以后数据表的标准化，也便于用户的查询使用。

**指标管理：**

包括基础信息、技术信息和衍生信息，由不同角色进行维护管理。 

- 基础信息对应指标的业务信息，由业务管理人员、数据产品或BI分析师维护，主要包括归属信息(业务板块、数据域、业务过程)，基本信息(指标名称、指标英文名称、指标定义、统计算法说明、指标类型(去重、非去重))，业务场景信息(分析维度，场景描述)；
- 技术信息对应指标的物理模型信息，由数据研发进行维护，主要包括对应物理表及字段信息；
- 衍生信息对应关联派生或衍生指标信息、关联数据应用和业务场景信息，便于用户查询指标被哪些其它指标和数据应用使用，提供指标血缘分析追查数据来源的能力。

原子指标定义归属信息 + 基本信息 + 业务场景信息

派生指标定义时间周期 + 修饰词集合 + 原子指标

修饰类型主要包含类型说明、统计算法说明、数据源(可选)

